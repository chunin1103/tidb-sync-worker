# Render Blueprint for TiDB Sync Worker (Web Service)
# Deploy: https://render.com/deploy?repo=YOUR_GITHUB_REPO_URL
#
# No Docker required - uses native Python runtime with boto3

services:
  - type: web
    name: tidb-sync-worker
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: python sync_worker.py
    healthCheckPath: /
    envVars:
      - key: TIDB_HOST
        value: gateway01.ap-southeast-1.prod.aws.tidbcloud.com
      - key: TIDB_PORT
        value: "4000"
      - key: TIDB_USER
        sync: false  # Set manually in dashboard
      - key: TIDB_PASSWORD
        sync: false  # Set manually in dashboard (secret)
      - key: TIDB_DATABASE
        value: test
      - key: IDRIVE_ACCESS_KEY
        sync: false  # Set manually in dashboard
      - key: IDRIVE_SECRET_KEY
        sync: false  # Set manually in dashboard (secret)
      - key: IDRIVE_ENDPOINT
        sync: false  # Set manually in dashboard
      - key: IDRIVE_BUCKET
        value: dbdaily
